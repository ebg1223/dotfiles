{{- if eq .chezmoi.os "linux" }}
# Homebrew (Linuxbrew)
if test -x /home/linuxbrew/.linuxbrew/bin/brew
    eval (/home/linuxbrew/.linuxbrew/bin/brew shellenv)
end
{{- end }}



fish_add_path ~/.npm-global/bin ~/.bun/bin $HOME/.local/scripts $HOME/.local/bin
mise activate fish | source

if status is-interactive
    # Commands to run in interactive sessions can go here
    #
    starship init fish | source
{{- if eq .chezmoi.os "darwin" }}
    ssh-add --apple-load-keychain -q >/dev/null 2>&1
    if test "$TERM_PROGRAM" = ghostty
        set -Ux TERM xterm-256color
    end
{{- end }}
{{- if eq .chezmoi.os "linux" }}
    set -gx TERM xterm-256color
    set -gx FORCE_COLOR 3
    fish_add_path /home/linuxbrew/.linuxbrew/bin/brew

    # Set window title to show hostname and shpool session
    function fish_title
        set -l title (hostname -s)
        if test -n "$SHPOOL_SESSION_NAME"
            set title "$title:$SHPOOL_SESSION_NAME"
        end
        # $argv[1] contains the current command when one is running
        if test (count $argv) -gt 0
            set title "$title â€” $argv[1]"
        end
        echo $title
    end
{{- end }}
end

zoxide init fish | source

